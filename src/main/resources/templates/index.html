<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>一個小圈子</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/index.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
<div class="header"></div>
<nav class="navbar-default">
    <div>
        <div class="home-href">
            <a href="/">小圈子</a>
        </div>

        <div>
            <ul>
                <li>
                    <a href="/">網站首頁</a>
                </li>
                <li>
                    <a href="/help.html">網站幫助</a>
                </li>
                <li>
                    <a th:if="${user} == null" href="/login.html">登錄賬戶</a>
                </li>
                <li>
                    <a th:if="${user} != null" href="/users">用戶列表</a>
                </li>
                <li>
                    <a th:if="${user} != null" th:href="@{/signout}">退出登錄</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="master-page" id="loginPage" th:if="${user} == null">
    <h1 class="h1-size">歡迎來到測試網站</h1>
    <h2>可以進行註冊體驗一下，並希望您能給出寶貴的建議和意見</h2>
    <div class="signup-style">
        <a href="/signup.html">註冊</a>
    </div>
</div>

<div id="homePage" th:if="${user} != null">
    <div>
        <aside>
            <section>
                <a id="userLink" th:href="@{'/users/' + ${user.id}}">
                    <img src="/images/images.jpeg" width="50" height="50">
                </a>
                <h1 th:text="${user.name}" id="userName"></h1>
            </section>
            <section>
                <a th:href="@{'/users/' + ${user.id}}">
                    <strong>
                        1
                    </strong>
                    following
                </a>
                <a th:href="@{'/users/' + ${user.id}}">
                    <strong>
                        2
                    </strong>
                    followers
                </a>
            </section>
            <section>
                <form action="/addMP" method="post">
                    <div>
                        <textarea placeholder="最多500字" name="micropost_content"></textarea>
                    </div>
                    <input type="submit" value="Post" name="commit">
                </form>
            </section>
        </aside>
    </div>

    <div>
        <h3>Micropost Feed</h3>
        <ol th:each="micropost:${pageInfo.getList()}" style="list-style-type: none">
            <li th:text="${micropost.text}"></li>
        </ol>

        <ol id="micropostList" type="none" style="list-style-type: none;">
            <li th:if="${pageInfo.hasPreviousPage}">
                <a th:href="'/?pageNum=1'">首頁</a>
            </li>

            <li th:href="'/?pageNum=' + ${pageInfo.prePage}">/li>

            <li th:each="nav:${pageInfo.navigatepageNums}">
                <a th:href="'/?pageNum=' + ${nav}" th:text="${nav}" th:if="${nav != pageInfo.pageNum}">s</a>
                <span style="font-weight: bold;background: #6faed9;" th:if="${nav == pageNum}" th:text="${nav}"></span>
            </li>

            <li th:if="${pageInfo.hasNextPage}">
                <a th:href="'/?pageNum=' + ${pageInfo.nextPage}">-></a>
            </li>

            <li>
                <a th:href="'/?pageNum=' + ${pageInfo.Pages}">尾頁</a>
            </li>

            <div>当前页号：<span th:text="${pageInfo.pageNum}"></span></div>
            <div>每页条数：<span th:text="${pageInfo.pageSize}"></span></div>
            <div>起始行号：<span th:text="${pageInfo.startRow}"></span></div>
            <div>终止行号：<span th:text="${pageInfo.endRow}"></span></div>
            <div>总结果数：<span th:text="${pageInfo.total}"></span></div>
            <div>总页数：<span th:text="${pageInfo.pages}"></span></div>
            <hr />
            <div>是否为第一页：<span th:text="${pageInfo.isFirstPage}"></span></div>
            <div>是否为最后一页：<span th:text="${pageInfo.isLastPage}"></span></div>
            <div>是否有前一页：<span th:text="${pageInfo.hasPreviousPage}"></span></div>
            <div>是否有下一页：<span th:text="${pageInfo.hasNextPage}"></span></div>

        </ol>
    </div>
</div>

<footer class="footer">
    <small>
        本項目由<span style="color:blue"><a href="/about.html">wbs</a></span>邊學邊練跑起來的，僅做測試使用
    </small>
    <nav>
        <ul>
            <li>
                <a href="/about.html">關於</a>
            </li>
            <li>
                <a href="/contact.html">聯繫</a>
            </li>
        </ul>
    </nav>
</footer>

</body>

<script>

    $(document).ready(function() {
        $.getJSON("/microposts", function(result) {

            $("#microposts").replaceWith(result);
        });
    });

</script>

</html>
